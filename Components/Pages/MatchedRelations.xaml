<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="QanooniRishta.Components.Pages.MatchedRelations"
    Padding="16">

    <VerticalStackLayout Spacing="12">

        <HorizontalStackLayout HorizontalOptions="Fill" Spacing="10">
            <Button Text="Back" Clicked="OnBackClicked" />
            <Button Text="Add Relation" Clicked="OnAddRelationClicked" />
            <Button Text="Export Excel" Clicked="OnExportClicked" />
        </HorizontalStackLayout>

        <SearchBar 
            Placeholder="Search"
            TextChanged="OnSearchTextChanged" />

        <CollectionView
            x:Name="RelationsCollectionView"
            SelectionMode="Single"
            SelectionChanged="OnSelectionChanged"
            ItemsSource="{Binding FilteredRelations}">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="10" Margin="0,0,0,10" BorderColor="Gray" CornerRadius="5">
                        <Grid ColumnDefinitions="*,*,*,*,*,Auto" RowDefinitions="Auto">

                            <Label Text="{Binding FirstName}" Grid.Column="0" />
                            <Label Text="{Binding LastName}" Grid.Column="1" />
                            <Label Text="{Binding Age}" Grid.Column="2" />
                            <Label Text="{Binding Gender}" Grid.Column="3" />
                            <Label Text="{Binding Address}" Grid.Column="4" />

                            <HorizontalStackLayout Grid.Column="5" Spacing="8" VerticalOptions="Center">
                                <Button Text="View" Clicked="OnViewClicked" />
                                <Button Text="Edit" Clicked="OnEditClicked" />
                                <Button Text="Delete" Clicked="OnDeleteClicked" />
                            </HorizontalStackLayout>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </VerticalStackLayout>

</ContentPage>
